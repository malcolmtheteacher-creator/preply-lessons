<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IELTS Lesson 17 - Timed Essay Practice 2</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .nav-button {
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 12px 30px;
            border-radius: 10px;
            text-decoration: none;
            transition: all 0.3s;
            border: 2px solid rgba(255,255,255,0.3);
        }

        .nav-button:hover {
            background: rgba(255,255,255,0.3);
            border-color: white;
            transform: translateY(-2px);
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 50px;
        }

        .section h2 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .section h3 {
            color: #764ba2;
            font-size: 1.5em;
            margin: 25px 0 15px 0;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 15px 30px;
            background: #f0f0f0;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s;
        }

        .tab:hover {
            background: #e0e0e0;
        }

        .tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .info-box {
            background: #e8eaf6;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #667eea;
            margin: 20px 0;
        }

        .info-box strong {
            color: #667eea;
        }

        .warning-box {
            background: #fff3cd;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #ffc107;
            margin: 20px 0;
        }

        .success-box {
            background: #d4edda;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #28a745;
            margin: 20px 0;
        }

        /* Timer Styles */
        .timer-container {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            margin: 30px 0;
        }

        .timer-display {
            font-size: 4em;
            font-weight: bold;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }

        .timer-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .timer-button {
            background: white;
            color: #667eea;
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .timer-button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .timer-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .timer-stage {
            font-size: 1.2em;
            margin-top: 15px;
            opacity: 0.9;
        }

        /* Essay Writing Area */
        .essay-builder {
            background: #f9f9f9;
            padding: 30px;
            border-radius: 15px;
            margin: 25px 0;
        }

        .essay-part {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
            border-left: 5px solid #667eea;
        }

        .essay-part h4 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .essay-part textarea {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1em;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            resize: vertical;
        }

        .word-count {
            text-align: right;
            color: #666;
            margin-top: 5px;
            font-size: 0.9em;
        }

        .action-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            margin-top: 20px;
            transition: transform 0.2s;
        }

        .action-button:hover {
            transform: scale(1.05);
        }

        .secondary-button {
            background: #6c757d;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            cursor: pointer;
            margin-left: 10px;
        }

        .secondary-button:hover {
            background: #5a6268;
        }

        /* Progress Bar */
        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.5s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        /* Comparison Tool */
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin: 30px 0;
        }

        .comparison-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .comparison-card h4 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .metric-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
        }

        .metric-label {
            font-weight: bold;
            color: #555;
        }

        .metric-value {
            color: #667eea;
            font-weight: bold;
        }

        .improvement-indicator {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 5px;
            font-size: 0.85em;
            margin-left: 10px;
        }

        .improvement-indicator.up {
            background: #d4edda;
            color: #155724;
        }

        .improvement-indicator.down {
            background: #f8d7da;
            color: #721c24;
        }

        .improvement-indicator.same {
            background: #e8eaf6;
            color: #667eea;
        }

        /* Checklist */
        .checklist {
            background: white;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .checklist-item {
            padding: 15px;
            margin: 10px 0;
            background: #f9f9f9;
            border-radius: 10px;
            border-left: 4px solid #ddd;
            cursor: pointer;
            transition: all 0.3s;
        }

        .checklist-item:hover {
            background: #f0f0f0;
        }

        .checklist-item.checked {
            border-left-color: #28a745;
            background: #d4edda;
        }

        .checklist-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 15px;
            cursor: pointer;
        }

        /* Stats Display */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .stat-card h3 {
            font-size: 2.5em;
            color: #667eea;
            margin-bottom: 10px;
        }

        .stat-card p {
            color: #666;
            font-size: 1.1em;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            .content {
                padding: 20px;
            }
            .tabs {
                flex-direction: column;
            }
            .comparison-grid {
                grid-template-columns: 1fr;
            }
            .timer-display {
                font-size: 3em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>IELTS Lesson 17</h1>
            <p>Timed Essay Practice 2 - Discussion Essay</p>
            <div class="nav-buttons">
                <a href="ielts_course_dashboard.html" class="nav-button">Back to Dashboard</a>
                <a href="ielts_lesson_16_timed_practice_1.html" class="nav-button">< Previous Lesson</a>
                <a href="ielts_lesson_18_exam_simulation.html" class="nav-button">Next Lesson ></a>
            </div>
        </div>

        <div class="content">
            <!-- Navigation Tabs -->
            <div class="tabs">
                <button class="tab active" onclick="showTab('intro')">Introduction</button>
                <button class="tab" onclick="showTab('review')">Review Essay 1</button>
                <button class="tab" onclick="showTab('preparation')">Preparation</button>
                <button class="tab" onclick="showTab('practice')">Timed Practice</button>
                <button class="tab" onclick="showTab('comparison')">Compare Results</button>
                <button class="tab" onclick="showTab('improvement')">Improvement Plan</button>
            </div>

            <!-- Tab 1: Introduction -->
            <div id="intro" class="tab-content active">
                <div class="section">
                    <h2>Welcome to Timed Practice 2</h2>
                    <p style="font-size: 1.1em; margin-bottom: 30px;">This is your second timed essay practice. Today you'll write a Discussion essay and compare your performance with Essay 1.</p>
                    
                    <div class="info-box">
                        <h3 style="margin-bottom: 15px;">Lesson Objectives</h3>
                        <ul style="margin-left: 25px; line-height: 1.8;">
                            <li>Write a complete Discussion essay in 40 minutes</li>
                            <li>Apply time management strategies learned previously</li>
                            <li>Compare performance with your first timed essay</li>
                            <li>Identify areas of improvement</li>
                            <li>Build confidence for the actual exam</li>
                        </ul>
                    </div>

                    <div class="success-box" style="margin-top: 30px;">
                        <h3 style="margin-bottom: 15px;">What's Different This Time?</h3>
                        <p style="margin-bottom: 10px;"><strong>Essay Type:</strong> Discussion (Discuss both views + opinion)</p>
                        <p style="margin-bottom: 10px;"><strong>Your Experience:</strong> You've done this once before, so you know what to expect</p>
                        <p style="margin-bottom: 10px;"><strong>Focus:</strong> Implementing feedback from Essay 1</p>
                        <p><strong>Goal:</strong> Show measurable improvement in at least 2 areas</p>
                    </div>

                    <h3 style="margin-top: 40px;">Today's Question</h3>
                    <div class="essay-builder">
                        <div style="background: white; padding: 30px; border-radius: 10px; border: 3px solid #667eea;">
                            <p style="font-size: 1.2em; line-height: 1.8;"><strong>Some people think that parents should teach children how to be good members of society. Others believe that school is the place to learn this.</strong></p>
                            <p style="font-size: 1.2em; line-height: 1.8; margin-top: 15px;"><strong>Discuss both these views and give your own opinion.</strong></p>
                            <p style="margin-top: 20px; color: #666;"><em>Essay Type: Discussion | Target: 270-290 words | Time: 40 minutes</em></p>
                        </div>
                    </div>

                    <div class="warning-box">
                        <strong>IMPORTANT:</strong> Before starting the timer, complete the Review and Preparation tabs to maximize your success!
                    </div>
                </div>
            </div>

            <!-- Tab 2: Review Essay 1 -->
            <div id="review" class="tab-content">
                <div class="section">
                    <h2>Review Your First Essay</h2>
                    <p style="font-size: 1.1em; margin-bottom: 30px;">Let's look at your performance in Essay 1 to identify what to focus on today.</p>
                    
                    <h3>Your Essay 1 Metrics</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3 id="essay1-words">---</h3>
                            <p>Word Count</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="essay1-time">--:--</h3>
                            <p>Time Used</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="essay1-planning">-- min</h3>
                            <p>Planning Time</p>
                        </div>
                        <div class="stat-card">
                            <h3 id="essay1-writing">-- min</h3>
                            <p>Writing Time</p>
                        </div>
                    </div>

                    <div class="info-box">
                        <p><strong>Note:</strong> If you haven't done Essay 1 yet, use estimates based on your typical writing speed. After completing this essay, you can compare future practice essays with this one.</p>
                    </div>

                    <h3 style="margin-top: 40px;">Key Feedback from Essay 1</h3>
                    <div class="essay-builder">
                        <div class="essay-part">
                            <h4>What Went Well</h4>
                            <textarea id="feedback-strengths" placeholder="List 3-4 strengths from your first essay...

Example:
- Clear thesis statement in introduction
- Good use of examples in body paragraphs
- Stayed within time limit
- Appropriate word count"></textarea>
                        </div>

                        <div class="essay-part">
                            <h4>Areas to Improve</h4>
                            <textarea id="feedback-weaknesses" placeholder="List 3-4 areas that need improvement...

Example:
- Need more complex sentences for higher GRA score
- Paragraphs could be better developed (TR)
- Some linking words used repetitively (CC)
- A few vocabulary errors affected clarity (LR)"></textarea>
                        </div>

                        <div class="essay-part">
                            <h4>Specific Goals for Essay 2</h4>
                            <textarea id="essay2-goals" placeholder="Set 2-3 specific, measurable goals for today's essay...

Example:
- Include at least 3 different types of complex sentences
- Write at least 70 words per body paragraph
- Use at least 5 different linking devices
- Spend exactly 10 minutes on planning"></textarea>
                        </div>
                    </div>

                    <button class="action-button" onclick="saveReviewData()">Save My Review & Goals</button>
                </div>
            </div>

            <!-- Tab 3: Preparation -->
            <div id="preparation" class="tab-content">
                <div class="section">
                    <h2>Pre-Writing Preparation</h2>
                    <p style="font-size: 1.1em; margin-bottom: 30px;">Take 5 minutes to prepare before starting your timed practice. This doesn't count toward your 40 minutes.</p>
                    
                    <h3>Question Analysis</h3>
                    <div class="essay-builder">
                        <div style="background: white; padding: 25px; border-radius: 10px;">
                            <p style="font-size: 1.1em; line-height: 1.8; margin-bottom: 20px;"><strong>Question:</strong> Some people think that parents should teach children how to be good members of society. Others believe that school is the place to learn this. Discuss both these views and give your own opinion.</p>
                            
                            <div style="margin: 20px 0;">
                                <p><strong>Essay Type:</strong> <span style="color: #667eea;">Discussion (Both Views + Opinion)</span></p>
                                <p><strong>Topic:</strong> <span style="color: #667eea;">Education / Parental responsibility vs. School responsibility</span></p>
                                <p><strong>Task:</strong> <span style="color: #667eea;">Present both views fairly, then give your opinion</span></p>
                            </div>
                        </div>
                    </div>

                    <h3 style="margin-top: 30px;">Quick Structure Check</h3>
                    <div class="checklist">
                        <div class="checklist-item" onclick="toggleCheck(this)">
                            <input type="checkbox" onclick="event.stopPropagation()">
                            <strong>Introduction:</strong> Hook + Paraphrase + Outline both views
                        </div>
                        <div class="checklist-item" onclick="toggleCheck(this)">
                            <input type="checkbox" onclick="event.stopPropagation()">
                            <strong>Body Paragraph 1:</strong> First view (Parents should teach) - neutral tone
                        </div>
                        <div class="checklist-item" onclick="toggleCheck(this)">
                            <input type="checkbox" onclick="event.stopPropagation()">
                            <strong>Body Paragraph 2:</strong> Second view (Schools should teach) - neutral tone
                        </div>
                        <div class="checklist-item" onclick="toggleCheck(this)">
                            <input type="checkbox" onclick="event.stopPropagation()">
                            <strong>Body Paragraph 3 (Optional):</strong> My opinion with reasoning
                        </div>
                        <div class="checklist-item" onclick="toggleCheck(this)">
                            <input type="checkbox" onclick="event.stopPropagation()">
                            <strong>Conclusion:</strong> Summarize both views + restate my opinion
                        </div>
                    </div>

                    <h3 style="margin-top: 30px;">Vocabulary Brainstorm</h3>
                    <div class="essay-builder">
                        <div class="essay-part">
                            <h4>Key Topic Words</h4>
                            <textarea placeholder="Brainstorm useful vocabulary for this topic...

Examples:
- social values, moral development, civic responsibility
- role models, guidance, upbringing
- educational system, curriculum, formal education
- behavioral norms, social skills, character building"></textarea>
                        </div>
                    </div>

                    <div class="info-box" style="margin-top: 30px;">
                        <h3 style="margin-bottom: 15px;">Pre-Writing Reminders</h3>
                        <ul style="margin-left: 25px; line-height: 1.8;">
                            <li>Spend 10 minutes planning (critical for Discussion essays!)</li>
                            <li>Present BOTH views fairly - equal length paragraphs</li>
                            <li>Use neutral language when presenting each view</li>
                            <li>Your opinion can be in a separate paragraph OR in the conclusion</li>
                            <li>Target: 270-290 words total</li>
                        </ul>
                    </div>

                    <button class="action-button" onclick="showTab('practice')">I'm Ready - Start Timed Practice</button>
                </div>
            </div>

            <!-- Tab 4: Timed Practice -->
            <div id="practice" class="tab-content">
                <div class="section">
                    <h2>40-Minute Timed Practice</h2>
                    
                    <!-- Timer -->
                    <div class="timer-container">
                        <div class="timer-stage" id="timer-stage">Ready to Start</div>
                        <div class="timer-display" id="timer-display">40:00</div>
                        <div class="timer-controls">
                            <button class="timer-button" id="start-btn" onclick="startTimer()">Start Timer</button>
                            <button class="timer-button" id="pause-btn" onclick="pauseTimer()" disabled>Pause</button>
                            <button class="timer-button" id="reset-btn" onclick="resetTimer()">Reset</button>
                        </div>
                        <p style="margin-top: 20px; font-size: 0.95em;">Tip: The timer will alert you at key stages (10 min, 20 min, 35 min)</p>
                    </div>

                    <div class="warning-box">
                        <strong>IMPORTANT:</strong> Once you start the timer, write your complete essay within 40 minutes. Try to simulate real exam conditions - no pausing unless absolutely necessary!
                    </div>

                    <h3>Your Essay Question</h3>
                    <div class="info-box">
                        <p style="font-size: 1.1em; line-height: 1.8;"><strong>Some people think that parents should teach children how to be good members of society. Others believe that school is the place to learn this.</strong></p>
                        <p style="font-size: 1.1em; line-height: 1.8; margin-top: 10px;"><strong>Discuss both these views and give your own opinion.</strong></p>
                    </div>

                    <!-- Essay Writing Area -->
                    <div class="essay-builder">
                        <div class="essay-part">
                            <h4>Planning Space (10 minutes recommended)</h4>
                            <textarea id="planning-text" oninput="updateWordCount('planning')"></textarea>
                            <div class="word-count" id="planning-count">0 words</div>
                        </div>

                        <div class="essay-part">
                            <h4>Introduction</h4>
                            <textarea id="intro-text" oninput="updateWordCount('intro')"></textarea>
                            <div class="word-count" id="intro-count">0 words</div>
                        </div>

                        <div class="essay-part">
                            <h4>Body Paragraph 1 - First View (Parents)</h4>
                            <textarea id="body1-text" oninput="updateWordCount('body1')"></textarea>
                            <div class="word-count" id="body1-count">0 words</div>
                        </div>

                        <div class="essay-part">
                            <h4>Body Paragraph 2 - Second View (Schools)</h4>
                            <textarea id="body2-text" oninput="updateWordCount('body2')"></textarea>
                            <div class="word-count" id="body2-count">0 words</div>
                        </div>

                        <div class="essay-part">
                            <h4>Body Paragraph 3 - My Opinion (Optional - can be in conclusion instead)</h4>
                            <textarea id="body3-text" oninput="updateWordCount('body3')"></textarea>
                            <div class="word-count" id="body3-count">0 words</div>
                        </div>

                        <div class="essay-part">
                            <h4>Conclusion</h4>
                            <textarea id="conclusion-text" oninput="updateWordCount('conclusion')"></textarea>
                            <div class="word-count" id="conclusion-count">0 words</div>
                        </div>

                        <div class="info-box" style="background: white; border: 3px solid #667eea;">
                            <h3 style="color: #667eea;">Essay Statistics</h3>
                            <div style="margin-top: 15px;">
                                <strong>Total Word Count:</strong> <span id="total-count" style="font-size: 1.5em; color: #667eea;">0</span> words
                                <div class="progress-bar">
                                    <div class="progress-fill" id="word-progress">0%</div>
                                </div>
                                <p style="margin-top: 10px; color: #666;"><em>Target: 270-290 words (minimum 250)</em></p>
                            </div>
                        </div>
                    </div>

                    <button class="action-button" onclick="finishEssay()">Finish Essay & Save</button>
                    <button class="secondary-button" onclick="autosave()">Save Draft</button>
                </div>
            </div>

            <!-- Tab 5: Compare Results -->
            <div id="comparison" class="tab-content">
                <div class="section">
                    <h2>Compare Your Performance</h2>
                    <p style="font-size: 1.1em; margin-bottom: 30px;">Let's see how Essay 2 compares to Essay 1!</p>
                    
                    <div class="comparison-grid">
                        <div class="comparison-card">
                            <h4>Essay 1 (Opinion Essay)</h4>
                            <div class="metric-row">
                                <span class="metric-label">Word Count:</span>
                                <span class="metric-value" id="compare-essay1-words">---</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Time Used:</span>
                                <span class="metric-value" id="compare-essay1-time">--:--</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Planning Time:</span>
                                <span class="metric-value" id="compare-essay1-plan">-- min</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Paragraphs:</span>
                                <span class="metric-value" id="compare-essay1-paras">-</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Avg Words/Para:</span>
                                <span class="metric-value" id="compare-essay1-avg">--</span>
                            </div>
                        </div>

                        <div class="comparison-card">
                            <h4>Essay 2 (Discussion Essay)</h4>
                            <div class="metric-row">
                                <span class="metric-label">Word Count:</span>
                                <span class="metric-value" id="compare-essay2-words">---</span>
                                <span class="improvement-indicator" id="words-change">--</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Time Used:</span>
                                <span class="metric-value" id="compare-essay2-time">--:--</span>
                                <span class="improvement-indicator" id="time-change">--</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Planning Time:</span>
                                <span class="metric-value" id="compare-essay2-plan">-- min</span>
                                <span class="improvement-indicator" id="plan-change">--</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Paragraphs:</span>
                                <span class="metric-value" id="compare-essay2-paras">-</span>
                                <span class="improvement-indicator" id="para-change">--</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label">Avg Words/Para:</span>
                                <span class="metric-value" id="compare-essay2-avg">--</span>
                                <span class="improvement-indicator" id="avg-change">--</span>
                            </div>
                        </div>
                    </div>

                    <h3 style="margin-top: 40px;">Progress Analysis</h3>
                    <div class="essay-builder">
                        <div class="essay-part">
                            <h4>Improvements Noted</h4>
                            <textarea id="improvements-noted" placeholder="What improved compared to Essay 1?

Example:
- Better time management - finished with 2 minutes to spare
- Planned for exactly 10 minutes as intended
- Body paragraphs were more balanced in length
- Used more varied linking words"></textarea>
                        </div>

                        <div class="essay-part">
                            <h4>Areas Still Needing Work</h4>
                            <textarea id="still-needs-work" placeholder="What still needs improvement?

Example:
- Introduction was rushed - only 35 words
- Could have developed examples more in body paragraphs
- Ran out of time for thorough proofreading
- Need to work on more complex grammar structures"></textarea>
                        </div>
                    </div>

                    <div class="success-box" style="margin-top: 30px;">
                        <h3 style="margin-bottom: 15px;">Key Insights</h3>
                        <ul style="margin-left: 25px; line-height: 1.8;">
                            <li>Comparing your essays helps you see concrete progress</li>
                            <li>Focus on 1-2 specific improvements for next practice</li>
                            <li>Even small improvements add up over time</li>
                            <li>Different essay types have different challenges</li>
                        </ul>
                    </div>

                    <button class="action-button" onclick="saveComparison()">Save Comparison Analysis</button>
                </div>
            </div>

            <!-- Tab 6: Improvement Plan -->
            <div id="improvement" class="tab-content">
                <div class="section">
                    <h2>Your Personalized Improvement Plan</h2>
                    <p style="font-size: 1.1em; margin-bottom: 30px;">Based on your two essays, let's create a focused plan for continued improvement.</p>
                    
                    <h3>Strengths to Maintain</h3>
                    <div class="checklist">
                        <div class="checklist-item" onclick="toggleCheck(this)">
                            <input type="checkbox" onclick="event.stopPropagation()">
                            Time management - I can complete essays within 40 minutes
                        </div>
                        <div class="checklist-item" onclick="toggleCheck(this)">
                            <input type="checkbox" onclick="event.stopPropagation()">
                            Planning skills - I spend adequate time planning before writing
                        </div>
                        <div class="checklist-item" onclick="toggleCheck(this)">
                            <input type="checkbox" onclick="event.stopPropagation()">
                            Essay structure - My essays follow the correct format
                        </div>
                        <div class="checklist-item" onclick="toggleCheck(this)">
                            <input type="checkbox" onclick="event.stopPropagation()">
                            Word count - I consistently meet the minimum word requirement
                        </div>
                        <div class="checklist-item" onclick="toggleCheck(this)">
                            <input type="checkbox" onclick="event.stopPropagation()">
                            Task Response - I address all parts of the question
                        </div>
                    </div>

                    <h3 style="margin-top: 40px;">Priority Areas for Improvement</h3>
                    <div class="essay-builder">
                        <div class="essay-part">
                            <h4>Area 1: [Criterion to Focus On]</h4>
                            <textarea placeholder="Identify your weakest criterion and specific actions...

Example - Grammatical Range & Accuracy:
- Current issue: Limited sentence variety, mostly simple sentences
- Target: Include at least 5 complex sentences per essay
- Action steps:
  1. Review complex sentence patterns (Lesson 12)
  2. Practice combining simple sentences
  3. Focus on one type per essay (relative clauses, conditionals, etc.)
  4. Get feedback specifically on grammar"></textarea>
                        </div>

                        <div class="essay-part">
                            <h4>Area 2: [Second Priority]</h4>
                            <textarea placeholder="Second area needing improvement...

Example - Coherence & Cohesion:
- Current issue: Overusing 'Moreover' and 'Furthermore'
- Target: Use 8-10 different cohesive devices per essay
- Action steps:
  1. Review linking words chart (Lesson 5)
  2. Make personal list of 10 favorites to memorize
  3. Check for repetition before submitting essays
  4. Practice using reference words (this, these, such)"></textarea>
                        </div>

                        <div class="essay-part">
                            <h4>Area 3: [Third Priority]</h4>
                            <textarea placeholder="Third area if needed...

Example - Lexical Resource:
- Current issue: Some awkward word choices, limited paraphrasing
- Target: Use topic-specific vocabulary more naturally
- Action steps:
  1. Build vocabulary lists by topic
  2. Practice paraphrasing questions (Lesson 14)
  3. Use collocations, not isolated words
  4. Read Band 8 essays for natural phrasing"></textarea>
                        </div>
                    </div>

                    <h3 style="margin-top: 40px;">Your 7-Day Practice Schedule</h3>
                    <div class="info-box">
                        <h4 style="margin-bottom: 15px;">Recommended Next Steps</h4>
                        <ul style="margin-left: 25px; line-height: 1.8;">
                            <li><strong>Days 1-2:</strong> Review feedback from both essays. Study the weakest criterion in depth.</li>
                            <li><strong>Days 3-4:</strong> Focused practice on your priority improvement area (e.g., grammar exercises, vocabulary building)</li>
                            <li><strong>Day 5:</strong> Write practice paragraphs applying what you've learned</li>
                            <li><strong>Day 6:</strong> Rest and review model essays for your target band score</li>
                            <li><strong>Day 7:</strong> Complete Lesson 18 - Full Exam Simulation</li>
                        </ul>
                    </div>

                    <h3 style="margin-top: 40px;">Before Your Next Practice Essay...</h3>
                    <div class="checklist">
                        <div class="checklist-item" onclick="toggleCheck(this)">
                            <input type="checkbox" onclick="event.stopPropagation()">
                            Review teacher feedback on both Essay 1 and Essay 2
                        </div>
                        <div class="checklist-item" onclick="toggleCheck(this)">
                            <input type="checkbox" onclick="event.stopPropagation()">
                            Complete focused practice on my weakest area
                        </div>
                        <div class="checklist-item" onclick="toggleCheck(this)">
                            <input type="checkbox" onclick="event.stopPropagation()">
                            Study 2-3 Band 8 model essays
                        </div>
                        <div class="checklist-item" onclick="toggleCheck(this)">
                            <input type="checkbox" onclick="event.stopPropagation()">
                            Review all 5 essay types (lessons 6-10)
                        </div>
                        <div class="checklist-item" onclick="toggleCheck(this)">
                            <input type="checkbox" onclick="event.stopPropagation()">
                            Practice question analysis skills
                        </div>
                        <div class="checklist-item" onclick="toggleCheck(this)">
                            <input type="checkbox" onclick="event.stopPropagation()">
                            Get adequate rest before the full exam simulation
                        </div>
                    </div>

                    <div class="success-box" style="margin-top: 40px;">
                        <h3 style="margin-bottom: 15px;">Congratulations!</h3>
                        <p style="line-height: 1.8;">You've completed two timed essay practices. This is significant progress! You now have:</p>
                        <ul style="margin-left: 25px; margin-top: 10px; line-height: 1.8;">
                            <li>Experience with time pressure</li>
                            <li>Concrete data on your writing speed and patterns</li>
                            <li>A clear improvement plan based on actual performance</li>
                            <li>Growing confidence in your ability to complete essays</li>
                        </ul>
                        <p style="margin-top: 15px; font-weight: bold;">Next lesson: Full Exam Simulation (Task 1 + Task 2)</p>
                    </div>

                    <button class="action-button" onclick="savePlan()">Save My Improvement Plan</button>
                </div>
            </div>

        </div>
    </div>

    <script>
        // Tab Switching
        function showTab(tabName) {
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));
            
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Checklist Toggle
        function toggleCheck(element) {
            const checkbox = element.querySelector('input[type="checkbox"]');
            checkbox.checked = !checkbox.checked;
            
            if (checkbox.checked) {
                element.classList.add('checked');
            } else {
                element.classList.remove('checked');
            }
        }

        // Timer Variables
        let timeRemaining = 40 * 60; // 40 minutes in seconds
        let timerInterval = null;
        let isRunning = false;
        let startTime = null;

        function startTimer() {
            if (!isRunning) {
                isRunning = true;
                startTime = Date.now() - ((40 * 60 - timeRemaining) * 1000);
                
                document.getElementById('start-btn').disabled = true;
                document.getElementById('pause-btn').disabled = false;
                
                timerInterval = setInterval(updateTimer, 1000);
            }
        }

        function pauseTimer() {
            if (isRunning) {
                isRunning = false;
                clearInterval(timerInterval);
                
                document.getElementById('start-btn').disabled = false;
                document.getElementById('pause-btn').disabled = true;
            }
        }

        function resetTimer() {
            pauseTimer();
            timeRemaining = 40 * 60;
            updateTimerDisplay();
            document.getElementById('timer-stage').textContent = 'Ready to Start';
            document.getElementById('start-btn').disabled = false;
        }

        function updateTimer() {
            timeRemaining--;
            
            if (timeRemaining <= 0) {
                timeRemaining = 0;
                pauseTimer();
                alert('Time is up! Your 40 minutes have ended.');
                document.getElementById('timer-stage').textContent = 'TIME UP!';
            }
            
            updateTimerDisplay();
            updateTimerStage();
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timer-display').textContent = 
                `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }

        function updateTimerStage() {
            const elapsed = 40 * 60 - timeRemaining;
            const elapsedMinutes = Math.floor(elapsed / 60);
            
            let stage = '';
            if (elapsedMinutes < 10) {
                stage = 'Planning Stage (0-10 min)';
            } else if (elapsedMinutes < 20) {
                stage = 'Introduction + Body 1 (10-20 min)';
            } else if (elapsedMinutes < 35) {
                stage = 'Body 2 + Body 3 (20-35 min)';
            } else if (elapsedMinutes < 40) {
                stage = 'Conclusion + Proofreading (35-40 min)';
            } else {
                stage = 'TIME UP!';
            }
            
            document.getElementById('timer-stage').textContent = stage;
            
            // Alert at key timestamps
            if (elapsed === 10 * 60) {
                alert('10 minutes: Planning time should be complete!');
            } else if (elapsed === 20 * 60) {
                alert('20 minutes: Half time! Check your progress.');
            } else if (elapsed === 35 * 60) {
                alert('35 minutes: Start wrapping up! Time for conclusion.');
            }
        }

        // Word Count Functions
        function updateWordCount(section) {
            const textarea = document.getElementById(`${section}-text`);
            const countDisplay = document.getElementById(`${section}-count`);
            const words = textarea.value.trim().split(/\s+/).filter(word => word.length > 0);
            countDisplay.textContent = `${words.length} words`;
            
            updateTotalWordCount();
        }

        function updateTotalWordCount() {
            const sections = ['intro', 'body1', 'body2', 'body3', 'conclusion'];
            let total = 0;
            
            sections.forEach(section => {
                const textarea = document.getElementById(`${section}-text`);
                if (textarea && textarea.value.trim()) {
                    const words = textarea.value.trim().split(/\s+/).filter(word => word.length > 0);
                    total += words.length;
                }
            });
            
            document.getElementById('total-count').textContent = total;
            
            const progress = Math.min((total / 290) * 100, 100);
            const progressBar = document.getElementById('word-progress');
            progressBar.style.width = `${progress}%`;
            progressBar.textContent = `${Math.round(progress)}%`;
        }

        // Save Functions
        function saveReviewData() {
            alert('Review and goals saved! You can now proceed to preparation.');
            showTab('preparation');
        }

        function finishEssay() {
            pauseTimer();
            
            const total = parseInt(document.getElementById('total-count').textContent);
            
            if (total === 0) {
                alert('Please write your essay first!');
                return;
            }
            
            const timeUsed = 40 - Math.floor(timeRemaining / 60);
            
            if (confirm(`Essay completed!\n\nWord Count: ${total}\nTime Used: ${timeUsed} minutes\n\nSave and proceed to comparison?`)) {
                // Save essay data
                localStorage.setItem('essay2_words', total);
                localStorage.setItem('essay2_time', timeUsed);
                
                alert('Essay 2 saved successfully! Proceeding to comparison tab...');
                showTab('comparison');
                loadComparisonData();
            }
        }

        function autosave() {
            alert('Draft saved! You can continue writing.');
        }

        function loadComparisonData() {
            // Load Essay 1 data if available
            const essay1Words = localStorage.getItem('essay1_words') || '---';
            const essay1Time = localStorage.getItem('essay1_time') || '--';
            
            document.getElementById('compare-essay1-words').textContent = essay1Words;
            document.getElementById('compare-essay1-time').textContent = essay1Time === '--' ? '--:--' : `${essay1Time}:00`;
            
            // Load Essay 2 data
            const essay2Words = localStorage.getItem('essay2_words') || '---';
            const essay2Time = localStorage.getItem('essay2_time') || '--';
            
            document.getElementById('compare-essay2-words').textContent = essay2Words;
            document.getElementById('compare-essay2-time').textContent = essay2Time === '--' ? '--:--' : `${essay2Time}:00`;
            
            // Calculate improvements
            if (essay1Words !== '---' && essay2Words !== '---') {
                const diff = parseInt(essay2Words) - parseInt(essay1Words);
                const indicator = document.getElementById('words-change');
                
                if (diff > 0) {
                    indicator.textContent = `+${diff}`;
                    indicator.className = 'improvement-indicator up';
                } else if (diff < 0) {
                    indicator.textContent = `${diff}`;
                    indicator.className = 'improvement-indicator down';
                } else {
                    indicator.textContent = 'same';
                    indicator.className = 'improvement-indicator same';
                }
            }
        }

        function saveComparison() {
            alert('Comparison analysis saved! Proceed to create your improvement plan.');
            showTab('improvement');
        }

        function savePlan() {
            alert('Improvement plan saved! Great work completing both timed practices. See you in Lesson 18 for the full exam simulation!');
        }

        // Initialize on page load
        window.onload = function() {
            updateTimerDisplay();
        };
    </script>
</body>
</html>
