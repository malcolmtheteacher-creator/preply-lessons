<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 9: Problem-Solution Essays - IELTS Writing Task 2</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .nav-button {
            background: rgba(255,255,255,0.2);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            transition: all 0.3s;
            border: 2px solid rgba(255,255,255,0.3);
        }

        .nav-button:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 50px;
        }

        .section h2 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .section h3 {
            color: #764ba2;
            font-size: 1.5em;
            margin: 25px 0 15px 0;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 15px 30px;
            background: #f0f0f0;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s;
        }

        .tab:hover {
            background: #e0e0e0;
        }

        .tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .info-box {
            background: #e8eaf6;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #667eea;
            margin: 20px 0;
        }

        .info-box strong {
            color: #667eea;
        }

        .warning-box {
            background: #fff3cd;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #ffc107;
            margin: 20px 0;
        }

        .success-box {
            background: #d4edda;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #28a745;
            margin: 20px 0;
        }

        .drag-drop-area {
            background: #f9f9f9;
            padding: 30px;
            border-radius: 15px;
            margin: 25px 0;
        }

        .draggable-items {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 30px;
            min-height: 80px;
            padding: 20px;
            background: white;
            border-radius: 10px;
            border: 2px dashed #ccc;
        }

        .draggable {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            cursor: move;
            user-select: none;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            transition: transform 0.2s;
        }

        .draggable:hover {
            transform: scale(1.05);
        }

        .draggable.dragging {
            opacity: 0.5;
        }

        .drop-zone {
            min-height: 80px;
            padding: 20px;
            margin: 15px 0;
            background: white;
            border: 2px dashed #667eea;
            border-radius: 10px;
            transition: all 0.3s;
        }

        .drop-zone.drag-over {
            background: #e8eaf6;
            border-color: #764ba2;
        }

        .drop-zone h4 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .check-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            margin-top: 20px;
            transition: transform 0.2s;
        }

        .check-button:hover {
            transform: scale(1.05);
        }

        .reset-button {
            background: #6c757d;
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 8px;
            cursor: pointer;
            margin-left: 10px;
        }

        .reset-button:hover {
            background: #5a6268;
        }

        .feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 10px;
            font-weight: bold;
            display: none;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 2px solid #28a745;
            display: block;
        }

        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #dc3545;
            display: block;
        }

        .phrase-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .phrase-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #ddd;
            transition: all 0.3s;
            cursor: pointer;
        }

        .phrase-card:hover {
            border-color: #667eea;
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .phrase-card strong {
            color: #667eea;
            display: block;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .example-sentence {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
            cursor: pointer;
            border: 2px solid #ddd;
            transition: all 0.3s;
            position: relative;
        }

        .example-sentence:hover {
            border-color: #667eea;
            transform: translateX(5px);
        }

        .example-sentence .label {
            display: none;
            position: absolute;
            top: -10px;
            right: 20px;
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: bold;
        }

        .example-sentence.revealed .label {
            display: block;
        }

        .example-sentence.revealed {
            background: #e8eaf6;
            border-color: #764ba2;
        }

        .model-essay {
            background: #f9f9f9;
            padding: 30px;
            border-radius: 15px;
            margin: 25px 0;
            line-height: 1.8;
        }

        .model-essay p {
            margin: 15px 0;
        }

        .essay-builder {
            background: #f9f9f9;
            padding: 30px;
            border-radius: 15px;
            margin: 25px 0;
        }

        .essay-part {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
            border-left: 5px solid #667eea;
        }

        .essay-part h4 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .essay-part textarea {
            width: 100%;
            min-height: 100px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1em;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            resize: vertical;
        }

        .word-count {
            text-align: right;
            color: #666;
            margin-top: 5px;
            font-size: 0.9em;
        }

        .structure-diagram {
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin: 25px 0;
        }

        .structure-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
        }

        .structure-box h4 {
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .structure-arrow {
            text-align: center;
            font-size: 2em;
            color: #667eea;
            margin: 10px 0;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
        }

        .comparison-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
        }

        .comparison-table td {
            padding: 15px;
            border-bottom: 1px solid #ddd;
        }

        .comparison-table tr:hover {
            background: #f5f5f5;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.5s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            .content {
                padding: 20px;
            }
            .tabs {
                flex-direction: column;
            }
            .nav-buttons {
                flex-direction: column;
            }
            .phrase-grid {
                grid-template-columns: 1fr;
            }
        }

        ul {
            margin-left: 25px;
            line-height: 1.8;
        }

        li {
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîß Lesson 9: Problem-Solution Essays</h1>
            <p>Master the art of identifying problems and proposing effective solutions</p>
            
            <div class="nav-buttons">
                <a href="ielts_course_dashboard.html" class="nav-button">‚Üê Back to Dashboard</a>
                <a href="ielts_lesson_8_advantages_disadvantages.html" class="nav-button">‚Üê Previous Lesson</a>
                <a href="ielts_lesson_10_two_part_questions.html" class="nav-button">Next Lesson ‚Üí</a>
            </div>
        </div>

        <div class="content">
            <!-- Navigation Tabs -->
            <div class="tabs">
                <button class="tab active" onclick="showTab('intro')">üìã Introduction</button>
                <button class="tab" onclick="showTab('identifying')">üîç Identifying Questions</button>
                <button class="tab" onclick="showTab('structure')">üóÇÔ∏è Essay Structure</button>
                <button class="tab" onclick="showTab('language')">üí¨ Key Language</button>
                <button class="tab" onclick="showTab('causes')">üìä Analyzing Causes</button>
                <button class="tab" onclick="showTab('solutions')">‚úÖ Proposing Solutions</button>
                <button class="tab" onclick="showTab('model')">‚≠ê Model Essay</button>
                <button class="tab" onclick="showTab('practice')">‚úèÔ∏è Practice</button>
            </div>

            <!-- Tab 1: Introduction -->
            <div id="intro" class="tab-content active">
                <div class="section">
                    <h2>What is a Problem-Solution Essay?</h2>
                    
                    <div class="info-box">
                        <h3>üéØ Learning Objectives</h3>
                        <p>By the end of this lesson, you will be able to:</p>
                        <ul>
                            <li>Recognize problem-solution questions instantly</li>
                            <li>Analyze causes and effects systematically</li>
                            <li>Propose realistic and practical solutions</li>
                            <li>Use appropriate cause-effect language</li>
                            <li>Structure your essay for maximum clarity</li>
                        </ul>
                    </div>

                    <h3>What Makes Problem-Solution Essays Different?</h3>
                    <p style="font-size: 1.1em; line-height: 1.8; margin: 20px 0;">
                        Problem-solution essays require you to <strong>analyze a problem</strong> (identify causes/effects) and then 
                        <strong>propose practical solutions</strong>. Unlike opinion essays where you argue for one side, here you must:
                    </p>

                    <div class="phrase-grid">
                        <div class="phrase-card">
                            <strong>üîç Identify the Problem</strong>
                            <p>Clearly describe what the issue is and why it matters</p>
                        </div>
                        <div class="phrase-card">
                            <strong>üìä Explain Causes/Effects</strong>
                            <p>Analyze WHY the problem exists or what impact it has</p>
                        </div>
                        <div class="phrase-card">
                            <strong>üí° Propose Solutions</strong>
                            <p>Suggest realistic ways to address the problem</p>
                        </div>
                        <div class="phrase-card">
                            <strong>‚úÖ Evaluate Solutions</strong>
                            <p>Explain why your solutions would be effective</p>
                        </div>
                    </div>

                    <div class="warning-box">
                        <h3>‚ö†Ô∏è Common Student Mistakes</h3>
                        <ul>
                            <li><strong>Too vague:</strong> "People should be more responsible" (Not specific enough!)</li>
                            <li><strong>Unrealistic:</strong> "Governments should ban all cars" (Not practical!)</li>
                            <li><strong>Off-topic:</strong> Discussing advantages when asked for solutions</li>
                            <li><strong>Imbalanced:</strong> Spending too much time on problems, not enough on solutions</li>
                            <li><strong>Missing link:</strong> Not explaining HOW the solution would solve the problem</li>
                        </ul>
                    </div>

                    <h3>Typical Question Formats</h3>
                    <div class="success-box">
                        <p style="margin-bottom: 15px;"><strong>Format 1: Causes + Solutions</strong></p>
                        <p style="font-style: italic;">"Traffic congestion is becoming a serious problem in many cities. What are the causes of this problem? What measures can be taken to solve it?"</p>
                    </div>

                    <div class="success-box">
                        <p style="margin-bottom: 15px;"><strong>Format 2: Problems + Solutions</strong></p>
                        <p style="font-style: italic;">"Many people are struggling to find affordable housing. What problems does this cause? What solutions can you suggest?"</p>
                    </div>

                    <div class="success-box">
                        <p style="margin-bottom: 15px;"><strong>Format 3: Effects + Solutions</strong></p>
                        <p style="font-style: italic;">"Air pollution is increasing in urban areas. What are the effects of this on people's health? How can this problem be addressed?"</p>
                    </div>
                </div>
            </div>

            <!-- Tab 2: Identifying Questions -->
            <div id="identifying" class="tab-content">
                <div class="section">
                    <h2>Recognizing Problem-Solution Questions</h2>

                    <h3>Key Words to Look For</h3>
                    <div class="phrase-grid">
                        <div class="phrase-card">
                            <strong>Problem Words</strong>
                            <p>problem, issue, concern, challenge, difficulty, obstacle</p>
                        </div>
                        <div class="phrase-card">
                            <strong>Cause Words</strong>
                            <p>causes, reasons, factors, why, lead to, result from</p>
                        </div>
                        <div class="phrase-card">
                            <strong>Effect Words</strong>
                            <p>effects, impact, consequences, results, outcomes</p>
                        </div>
                        <div class="phrase-card">
                            <strong>Solution Words</strong>
                            <p>solutions, measures, ways, methods, address, solve, tackle</p>
                        </div>
                    </div>

                    <h3>Practice: Identify the Question Type</h3>
                    <div class="drag-drop-area">
                        <p style="margin-bottom: 20px;"><strong>Drag each question to the correct category:</strong></p>
                        
                        <div class="draggable-items" id="question-items">
                            <div class="draggable" draggable="true" data-type="problem-solution">What problems does air pollution cause? How can we solve this?</div>
                            <div class="draggable" draggable="true" data-type="causes-solutions">What causes traffic congestion? What solutions would you propose?</div>
                            <div class="draggable" draggable="true" data-type="opinion">Do you agree that governments should invest more in public transport?</div>
                            <div class="draggable" draggable="true" data-type="problem-solution">Obesity is increasing globally. What problems does this create? What can be done?</div>
                            <div class="draggable" draggable="true" data-type="causes-solutions">Why do young people leave rural areas? How can this trend be reversed?</div>
                        </div>

                        <div class="drop-zone" data-type="problem-solution">
                            <h4>Problem √¢‚Ä†' Solution</h4>
                            <p>(Identify problems then suggest solutions)</p>
                        </div>

                        <div class="drop-zone" data-type="causes-solutions">
                            <h4>Causes √¢‚Ä†' Solutions</h4>
                            <p>(Explain causes then propose solutions)</p>
                        </div>

                        <div class="drop-zone" data-type="opinion">
                            <h4>NOT Problem-Solution</h4>
                            <p>(This is a different essay type)</p>
                        </div>

                        <button class="check-button" onclick="checkQuestionTypes()">Check My Answers</button>
                        <button class="reset-button" onclick="resetQuestions()">Reset</button>
                        <div id="question-feedback" class="feedback"></div>
                    </div>

                    <div class="info-box">
                        <h3>üí° Pro Tip: Understand What They're Really Asking</h3>
                        <ul>
                            <li><strong>"What are the causes?"</strong> = Explain WHY the problem exists</li>
                            <li><strong>"What problems does this cause?"</strong> = Explain the EFFECTS/IMPACT</li>
                            <li><strong>"What solutions?"</strong> = Suggest specific, realistic actions</li>
                            <li><strong>"How can this be addressed?"</strong> = Who should do what to fix it</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Tab 3: Essay Structure -->
            <div id="structure" class="tab-content">
                <div class="section">
                    <h2>Problem-Solution Essay Structure</h2>

                    <h3>Two Main Structure Options</h3>

                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>Structure A: 4 Paragraphs</th>
                                <th>Structure B: 5 Paragraphs</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <strong>Introduction</strong><br>
                                    Hook + Context + Outline
                                </td>
                                <td>
                                    <strong>Introduction</strong><br>
                                    Hook + Context + Outline
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Body 1: Problems/Causes</strong><br>
                                    Discuss 2-3 causes or problems
                                </td>
                                <td>
                                    <strong>Body 1: First Problem/Cause</strong><br>
                                    Explain in detail with examples
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Body 2: Solutions</strong><br>
                                    Propose 2-3 realistic solutions
                                </td>
                                <td>
                                    <strong>Body 2: Second Problem/Cause</strong><br>
                                    Explain in detail with examples
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <strong>Conclusion</strong><br>
                                    Summarize + Final thought
                                </td>
                                <td>
                                    <strong>Body 3: Solutions</strong><br>
                                    Propose realistic solutions
                                </td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>
                                    <strong>Conclusion</strong><br>
                                    Summarize + Final thought
                                </td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="info-box">
                        <h3>Which Structure Should I Use?</h3>
                        <ul>
                            <li><strong>Structure A (4 paragraphs):</strong> Better when you have multiple causes/problems to discuss briefly</li>
                            <li><strong>Structure B (5 paragraphs):</strong> Better when you want to deeply analyze 2 main causes/problems</li>
                            <li><strong>Recommendation:</strong> Structure A is simpler and easier to manage in 40 minutes!</li>
                        </ul>
                    </div>

                    <h3>Detailed Structure A Breakdown</h3>
                    <div class="structure-diagram">
                        <div class="structure-box">
                            <h4>üìå INTRODUCTION (3-4 sentences)</h4>
                            <p>1. Hook - Get attention with a relevant statement</p>
                            <p>2. Paraphrase - Restate the problem from the question</p>
                            <p>3. Outline - Indicate you'll discuss causes + solutions</p>
                        </div>

                        <div class="structure-arrow">‚Üì</div>

                        <div class="structure-box">
                            <h4>üìä BODY PARAGRAPH 1: Causes/Problems (5-7 sentences)</h4>
                            <p>Topic Sentence: "There are several key causes of this problem"</p>
                            <p>Cause 1 + Explanation + Example</p>
                            <p>Cause 2 + Explanation + Example</p>
                            <p>Link: Connect to next paragraph</p>
                        </div>

                        <div class="structure-arrow">‚Üì</div>

                        <div class="structure-box">
                            <h4>‚úÖ BODY PARAGRAPH 2: Solutions (5-7 sentences)</h4>
                            <p>Topic Sentence: "Several measures can be taken to address this"</p>
                            <p>Solution 1 + Explanation + Why it works</p>
                            <p>Solution 2 + Explanation + Why it works</p>
                            <p>Link: Emphasize effectiveness</p>
                        </div>

                        <div class="structure-arrow">‚Üì</div>

                        <div class="structure-box">
                            <h4>üèÅ CONCLUSION (2-3 sentences)</h4>
                            <p>Summarize main causes and solutions</p>
                            <p>Final thought about importance of addressing the problem</p>
                        </div>
                    </div>

                    <div class="warning-box">
                        <h3>‚ö†Ô∏è Critical Balance Rule</h3>
                        <p><strong>Your body paragraphs should be roughly equal in length!</strong></p>
                        <ul>
                            <li>Don't write 150 words about problems and only 50 words about solutions</li>
                            <li>The question asks for BOTH - give equal attention to BOTH</li>
                            <li>Aim for: Body 1 = 80-100 words, Body 2 = 80-100 words</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Tab 4: Key Language -->
            <div id="language" class="tab-content">
                <div class="section">
                    <h2>Essential Language for Problem-Solution Essays</h2>

                    <h3>Cause-Effect Language</h3>
                    <div class="phrase-grid">
                        <div class="phrase-card">
                            <strong>Noun Forms</strong>
                            <p>The cause of X is Y</p>
                            <p>The reason for X is Y</p>
                            <p>One factor is Y</p>
                            <p>The effect of X is Y</p>
                        </div>
                        <div class="phrase-card">
                            <strong>Verb Forms</strong>
                            <p>X causes/leads to Y</p>
                            <p>X results in Y</p>
                            <p>X contributes to Y</p>
                            <p>Y stems from X</p>
                        </div>
                        <div class="phrase-card">
                            <strong>Linking Words</strong>
                            <p>Because of this, ...</p>
                            <p>As a result, ...</p>
                            <p>Consequently, ...</p>
                            <p>This is due to ...</p>
                        </div>
                        <div class="phrase-card">
                            <strong>Complex Structures</strong>
                            <p>One reason why X occurs is that...</p>
                            <p>This can be attributed to...</p>
                            <p>X has been exacerbated by...</p>
                        </div>
                    </div>

                    <h3>Solution Language</h3>
                    <div class="phrase-grid">
                        <div class="phrase-card">
                            <strong>Introducing Solutions</strong>
                            <p>One solution would be to...</p>
                            <p>This could be addressed by...</p>
                            <p>A practical approach is to...</p>
                            <p>The most effective measure is...</p>
                        </div>
                        <div class="phrase-card">
                            <strong>Who Takes Action</strong>
                            <p>Governments should/could...</p>
                            <p>Individuals can...</p>
                            <p>Companies need to...</p>
                            <p>Society must...</p>
                        </div>
                        <div class="phrase-card">
                            <strong>Explaining Effectiveness</strong>
                            <p>This would help to...</p>
                            <p>By doing this, ...</p>
                            <p>This measure would ensure...</p>
                            <p>Such action would reduce...</p>
                        </div>
                        <div class="phrase-card">
                            <strong>Conditional Language</strong>
                            <p>If governments implemented X, then Y would improve</p>
                            <p>Were companies to adopt X, this would result in Y</p>
                        </div>
                    </div>

                    <h3>Practice: Complete the Sentences</h3>
                    <div class="essay-builder">
                        <div style="background: white; padding: 20px; border-radius: 10px; margin: 15px 0;">
                            <p><strong>1.</strong> Traffic congestion <select id="lang1" style="padding: 5px; font-size: 1em;">
                                <option value="">Choose...</option>
                                <option value="correct">stems from</option>
                                <option value="wrong1">creates</option>
                                <option value="wrong2">happens</option>
                            </select> inadequate public transport infrastructure.</p>
                        </div>

                        <div style="background: white; padding: 20px; border-radius: 10px; margin: 15px 0;">
                            <p><strong>2.</strong> One solution would be <select id="lang2" style="padding: 5px; font-size: 1em;">
                                <option value="">Choose...</option>
                                <option value="wrong1">by implementing</option>
                                <option value="correct">to implement</option>
                                <option value="wrong2">implementing</option>
                            </select> stricter emission standards for vehicles.</p>
                        </div>

                        <div style="background: white; padding: 20px; border-radius: 10px; margin: 15px 0;">
                            <p><strong>3.</strong> Rising unemployment <select id="lang3" style="padding: 5px; font-size: 1em;">
                                <option value="">Choose...</option>
                                <option value="wrong1">because</option>
                                <option value="wrong2">and so</option>
                                <option value="correct">leads to</option>
                            </select> increased poverty and social problems.</p>
                        </div>

                        <div style="background: white; padding: 20px; border-radius: 10px; margin: 15px 0;">
                            <p><strong>4.</strong> <select id="lang4" style="padding: 5px; font-size: 1em;">
                                <option value="">Choose...</option>
                                <option value="wrong1">If</option>
                                <option value="correct">Were</option>
                                <option value="wrong2">When</option>
                            </select> governments to invest more in education, literacy rates would improve significantly.</p>
                        </div>

                        <button class="check-button" onclick="checkLanguage()">Check Answers</button>
                        <div id="language-feedback" class="feedback"></div>
                    </div>

                    <div class="success-box">
                        <h3>‚úÖ Vocabulary Building Tips</h3>
                        <ul>
                            <li><strong>Vary your language:</strong> Don't use "causes" five times - use "leads to," "results in," "contributes to"</li>
                            <li><strong>Be specific:</strong> "Implement public awareness campaigns" not just "make people aware"</li>
                            <li><strong>Use collocations:</strong> "Address the problem," "tackle the issue," "implement measures"</li>
                            <li><strong>Academic tone:</strong> "Governments should invest" not "Governments have to give money"</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Tab 5: Analyzing Causes -->
            <div id="causes" class="tab-content">
                <div class="section">
                    <h2>How to Analyze Causes Effectively</h2>

                    <h3>The DEEP Method for Analyzing Causes</h3>
                    <div class="info-box">
                        <p><strong>D</strong> - Describe the cause briefly</p>
                        <p><strong>E</strong> - Explain WHY it's a cause (the mechanism)</p>
                        <p><strong>E</strong> - Provide specific Evidence/Example</p>
                        <p><strong>P</strong> - Point to the impact/effect</p>
                    </div>

                    <h3>Example: Analyzing Traffic Congestion</h3>
                    <div class="model-essay">
                        <p><strong style="color: #667eea;">D - Describe:</strong> One primary cause of traffic congestion is the heavy reliance on private vehicles.</p>
                        
                        <p><strong style="color: #667eea;">E - Explain:</strong> This occurs because many urban areas lack efficient public transportation alternatives, forcing commuters to depend on personal cars for daily travel.</p>
                        
                        <p><strong style="color: #667eea;">E - Evidence:</strong> For instance, in Bangkok, over 60% of commuters use private vehicles due to limited metro coverage, resulting in peak-hour gridlock.</p>
                        
                        <p><strong style="color: #667eea;">P - Point to impact:</strong> Consequently, this not only wastes millions of hours in productivity but also significantly increases air pollution levels.</p>
                    </div>

                    <h3>Practice: Develop a Cause Analysis</h3>
                    <div class="drag-drop-area">
                        <p style="margin-bottom: 20px;"><strong>Topic: Childhood Obesity</strong></p>
                        <p>Arrange these sentences in the DEEP order:</p>
                        
                        <div class="draggable-items" id="cause-items">
                            <div class="draggable" draggable="true" data-order="3">In the United States, children now spend an average of 7 hours per day on screens, with minimal physical activity.</div>
                            <div class="draggable" draggable="true" data-order="2">When children spend excessive time on computers, tablets, and phones, they engage in minimal physical activity and often snack on unhealthy foods while sedentary.</div>
                            <div class="draggable" draggable="true" data-order="1">One significant factor contributing to childhood obesity is increased screen time.</div>
                            <div class="draggable" draggable="true" data-order="4">This sedentary lifestyle leads to weight gain and associated health problems at increasingly young ages.</div>
                        </div>

                        <div style="margin-top: 20px;">
                            <div class="drop-zone" data-order="1">
                                <h4>1. Describe (D)</h4>
                            </div>
                            <div class="drop-zone" data-order="2">
                                <h4>2. Explain (E)</h4>
                            </div>
                            <div class="drop-zone" data-order="3">
                                <h4>3. Evidence (E)</h4>
                            </div>
                            <div class="drop-zone" data-order="4">
                                <h4>4. Point to impact (P)</h4>
                            </div>
                        </div>

                        <button class="check-button" onclick="checkCauseOrder()">Check Order</button>
                        <button class="reset-button" onclick="resetCauses()">Reset</button>
                        <div id="cause-feedback" class="feedback"></div>
                    </div>

                    <div class="warning-box">
                        <h3>‚ö†Ô∏è Common Mistakes When Analyzing Causes</h3>
                        <ul>
                            <li><strong>Too vague:</strong> "People are stressed" - WHY are they stressed? Be specific!</li>
                            <li><strong>No explanation:</strong> Just stating "X causes Y" without explaining HOW</li>
                            <li><strong>No examples:</strong> Making general claims without supporting evidence</li>
                            <li><strong>Circular reasoning:</strong> "Traffic is bad because there are too many cars, and there are too many cars because traffic is bad"</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Tab 6: Proposing Solutions -->
            <div id="solutions" class="tab-content">
                <div class="section">
                    <h2>Proposing Effective Solutions</h2>

                    <h3>The SMART Solution Framework</h3>
                    <div class="info-box">
                        <p><strong>S</strong>pecific - Clearly state WHAT should be done</p>
                        <p><strong>M</strong>easurable - Can the results be observed?</p>
                        <p><strong>A</strong>chievable - Is it realistic and practical?</p>
                        <p><strong>R</strong>elevant - Does it actually address the problem?</p>
                        <p><strong>T</strong>argeted - Who should implement it?</p>
                    </div>

                    <h3>Good vs. Bad Solutions</h3>
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>‚ùå Weak Solution</th>
                                <th>‚úÖ Strong Solution</th>
                                <th>Why It's Better</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>"People should be more careful"</td>
                                <td>"Governments should implement mandatory safety training programs for all drivers"</td>
                                <td>Specific, targeted, actionable</td>
                            </tr>
                            <tr>
                                <td>"We need to stop pollution"</td>
                                <td>"Cities should expand public transportation networks and offer subsidies to reduce private vehicle use"</td>
                                <td>Concrete measures with clear mechanism</td>
                            </tr>
                            <tr>
                                <td>"Education is important"</td>
                                <td>"Schools should integrate financial literacy into the core curriculum from primary level onwards"</td>
                                <td>Specific who, what, when, where</td>
                            </tr>
                            <tr>
                                <td>"Ban everything harmful"</td>
                                <td>"Implement a gradual taxation system on sugary drinks, with revenue directed to health programs"</td>
                                <td>Realistic and includes positive action</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>Three Levels of Solutions</h3>
                    <div class="phrase-grid">
                        <div class="phrase-card">
                            <strong>üèõÔ∏è Government Level</strong>
                            <p>Legislation, policy changes, funding allocation, infrastructure development, regulation enforcement</p>
                            <p><em>Example: "Governments should invest in renewable energy infrastructure"</em></p>
                        </div>
                        <div class="phrase-card">
                            <strong>üè¢ Community/Organization Level</strong>
                            <p>Company policies, school programs, local initiatives, workplace changes</p>
                            <p><em>Example: "Companies could implement flexible working arrangements"</em></p>
                        </div>
                        <div class="phrase-card">
                            <strong>üë§ Individual Level</strong>
                            <p>Personal responsibility, behavior change, conscious choices, education</p>
                            <p><em>Example: "Individuals can reduce consumption and adopt sustainable practices"</em></p>
                        </div>
                    </div>

                    <h3>The Solution Development Template</h3>
                    <div class="model-essay">
                        <p><strong style="color: #667eea;">1. Introduce the solution:</strong> One effective measure to address traffic congestion would be to expand and modernize public transportation systems.</p>
                        
                        <p><strong style="color: #667eea;">2. Explain HOW it works:</strong> By providing reliable, efficient, and affordable alternatives to private vehicles, more commuters would be incentivized to use public transport for their daily travel.</p>
                        
                        <p><strong style="color: #667eea;">3. Provide specific example/evidence:</strong> Cities like Singapore have successfully reduced traffic by 15% through integrated metro systems and subsidized fares.</p>
                        
                        <p><strong style="color: #667eea;">4. Explain WHY it's effective:</strong> This approach not only reduces the number of vehicles on roads but also offers environmental benefits through decreased emissions.</p>
                    </div>

                    <h3>Practice: Improve These Solutions</h3>
                    <div class="essay-builder">
                        <div class="essay-part">
                            <h4>Weak Solution 1: "People should exercise more"</h4>
                            <p style="margin: 10px 0; color: #666;"><em>Problem: Too vague, no clear action, no responsible party</em></p>
                            <textarea id="improve1" placeholder="Rewrite this as a SMART solution... (e.g., 'Employers should provide on-site fitness facilities and offer one hour per week of paid exercise time to encourage employee wellness...')"></textarea>
                            <div class="word-count" id="improve1-count">0 words</div>
                        </div>

                        <div class="essay-part">
                            <h4>Weak Solution 2: "Stop climate change"</h4>
                            <p style="margin: 10px 0; color: #666;"><em>Problem: Too broad, unrealistic, no practical steps</em></p>
                            <textarea id="improve2" placeholder="Rewrite this as a SMART solution... (e.g., 'Governments should implement carbon taxation on industries while providing subsidies for companies that transition to renewable energy...')"></textarea>
                            <div class="word-count" id="improve2-count">0 words</div>
                        </div>

                        <button class="check-button" onclick="analyzeSolutions()">Analyze My Solutions</button>
                        <div id="solution-feedback" class="feedback"></div>
                    </div>

                    <div class="success-box">
                        <h3>‚úÖ Solution Writing Checklist</h3>
                        <ul>
                            <li>‚òê Is my solution SPECIFIC enough? (Not "improve things" but exact actions)</li>
                            <li>‚òê Have I identified WHO should implement it? (Governments/companies/individuals)</li>
                            <li>‚òê Have I explained HOW it would work?</li>
                            <li>‚òê Have I explained WHY it would be effective?</li>
                            <li>‚òê Is it REALISTIC? (Not "ban all cars" but practical measures)</li>
                            <li>‚òê Does it DIRECTLY address the causes I mentioned?</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Tab 7: Model Essay -->
            <div id="model" class="tab-content">
                <div class="section">
                    <h2>Band 8 Model Essay Analysis</h2>

                    <div class="info-box">
                        <strong>Question:</strong> "In many countries, the quality of life in large cities is becoming worse. What are the causes of this problem? What measures can be taken to solve it?"
                    </div>

                    <div class="model-essay">
                        <h3 style="color: #667eea; margin-bottom: 15px;">Introduction</h3>
                        
                        <p class="example-sentence" onclick="revealLabel(this, 'HOOK - Context setting')">
                            <span class="label"></span>
                            Urban living standards have deteriorated significantly in numerous metropolitan areas worldwide over recent decades.
                        </p>

                        <p class="example-sentence" onclick="revealLabel(this, 'PARAPHRASE - Restate the issue')">
                            <span class="label"></span>
                            This decline in city dwellers' quality of life stems from several interconnected factors and requires coordinated efforts to address effectively.
                        </p>

                        <p class="example-sentence" onclick="revealLabel(this, 'OUTLINE - Essay roadmap')">
                            <span class="label"></span>
                            This essay will examine the primary causes of this problem and propose practical solutions.
                        </p>

                        <h3 style="color: #764ba2; margin: 30px 0 15px 0;">Body Paragraph 1: Causes</h3>

                        <p class="example-sentence" onclick="revealLabel(this, 'TOPIC SENTENCE')">
                            <span class="label"></span>
                            Several key factors contribute to the declining urban quality of life.
                        </p>

                        <p class="example-sentence" onclick="revealLabel(this, 'CAUSE 1 - Description')">
                            <span class="label"></span>
                            First and foremost, rapid population growth in cities has overwhelmed existing infrastructure.
                        </p>

                        <p class="example-sentence" onclick="revealLabel(this, 'CAUSE 1 - Explanation + Evidence')">
                            <span class="label"></span>
                            As more people migrate from rural areas seeking employment opportunities, urban centers struggle to provide adequate housing, transportation, and public services. For instance, cities like Mumbai and Manila experience severe overcrowding, with millions living in substandard conditions.
                        </p>

                        <p class="example-sentence" onclick="revealLabel(this, 'CAUSE 2 - Description')">
                            <span class="label"></span>
                            Furthermore, environmental degradation has intensified, particularly air and noise pollution.
                        </p>

                        <p class="example-sentence" onclick="revealLabel(this, 'CAUSE 2 - Explanation + Evidence')">
                            <span class="label"></span>
                            The concentration of vehicles and industrial activities in urban areas leads to dangerously high pollution levels, which negatively impact residents' health and well-being. Beijing's persistent smog problems exemplify how environmental factors can severely diminish urban quality of life.
                        </p>

                        <h3 style="color: #764ba2; margin: 30px 0 15px 0;">Body Paragraph 2: Solutions</h3>

                        <p class="example-sentence" onclick="revealLabel(this, 'TOPIC SENTENCE')">
                            <span class="label"></span>
                            Several measures can be implemented to address these urban challenges effectively.
                        </p>

                        <p class="example-sentence" onclick="revealLabel(this, 'SOLUTION 1 - Introduction')">
                            <span class="label"></span>
                            Firstly, governments should invest substantially in expanding and modernizing urban infrastructure.
                        </p>

                        <p class="example-sentence" onclick="revealLabel(this, 'SOLUTION 1 - Explanation + Example')">
                            <span class="label"></span>
                            This includes developing efficient public transportation systems, constructing affordable housing, and upgrading utilities to meet growing demand. Singapore's success in maintaining high living standards despite its density demonstrates how strategic infrastructure investment can support population growth sustainably.
                        </p>

                        <p class="example-sentence" onclick="revealLabel(this, 'SOLUTION 2 - Introduction')">
                            <span class="label"></span>
                            Additionally, implementing stricter environmental regulations is crucial.
                        </p>

                        <p class="example-sentence" onclick="revealLabel(this, 'SOLUTION 2 - Explanation + Example')">
                            <span class="label"></span>
                            Authorities should enforce emission standards for vehicles and industries while promoting green spaces and renewable energy adoption. Cities like Copenhagen have successfully improved air quality through such policies, creating more livable urban environments.
                        </p>

                        <h3 style="color: #764ba2; margin: 30px 0 15px 0;">Conclusion</h3>

                        <p class="example-sentence" onclick="revealLabel(this, 'SUMMARY - Main points')">
                            <span class="label"></span>
                            In conclusion, while urban quality of life has declined due to population pressure and environmental degradation, strategic infrastructure development and environmental regulations can effectively address these challenges.
                        </p>

                        <p class="example-sentence" onclick="revealLabel(this, 'FINAL THOUGHT')">
                            <span class="label"></span>
                            With coordinated government action and proper resource allocation, cities can become more sustainable and pleasant places to live.
                        </p>

                        <div style="text-align: right; margin-top: 20px; color: #666; font-style: italic;">
                            [Word count: 276 words]
                        </div>
                    </div>

                    <div class="success-box">
                        <h3>üéØ Why This is Band 8</h3>
                        <ul>
                            <li><strong>Task Response:</strong> Fully addresses both causes AND solutions with well-developed ideas</li>
                            <li><strong>Coherence & Cohesion:</strong> Clear progression with effective linking (Firstly, Furthermore, Additionally)</li>
                            <li><strong>Lexical Resource:</strong> Sophisticated vocabulary (deteriorated, interconnected, degradation, substantially)</li>
                            <li><strong>Grammar:</strong> Complex structures with minimal errors (As more people migrate..., With coordinated action...)</li>
                            <li><strong>Balance:</strong> Equal attention to causes (105 words) and solutions (95 words)</li>
                            <li><strong>Specificity:</strong> Concrete examples (Mumbai, Manila, Beijing, Singapore, Copenhagen)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Tab 8: Practice -->
            <div id="practice" class="tab-content">
                <div class="section">
                    <h2>Practice Writing Your Essay</h2>

                    <div class="info-box">
                        <strong>Your Task:</strong><br>
                        "Many people are moving from rural to urban areas. What problems does this cause? What solutions can you suggest?"<br><br>
                        <em>Essay Type: Problem-Solution | Target: 270-290 words | Time: 40 minutes</em>
                    </div>

                    <div class="warning-box">
                        <h3>‚è±Ô∏è Time Management Plan</h3>
                        <ul>
                            <li><strong>Minutes 0-5:</strong> Analyze question, brainstorm 2 problems + 2 solutions</li>
                            <li><strong>Minutes 5-10:</strong> Plan structure and key points for each paragraph</li>
                            <li><strong>Minutes 10-15:</strong> Write introduction (paraphrase + outline)</li>
                            <li><strong>Minutes 15-25:</strong> Write Body 1 (Problems with DEEP method)</li>
                            <li><strong>Minutes 25-35:</strong> Write Body 2 (Solutions with explanation of effectiveness)</li>
                            <li><strong>Minutes 35-38:</strong> Write conclusion (summary + final thought)</li>
                            <li><strong>Minutes 38-40:</strong> Check for errors, count words</li>
                        </ul>
                    </div>

                    <div class="essay-builder">
                        <div class="essay-part">
                            <h4>Planning Space (Use this first!)</h4>
                            <textarea id="planning-text" placeholder="Brainstorm your ideas here:
- Problem 1:
- Problem 2:
- Solution 1:
- Solution 2:
Structure: ..." style="min-height: 120px;"></textarea>
                        </div>

                        <div class="essay-part">
                            <h4>Introduction (3-4 sentences)</h4>
                            <textarea id="intro-text" oninput="updateWordCount('intro')" placeholder="Hook + Paraphrase question + Outline"></textarea>
                            <div class="word-count" id="intro-count">0 words</div>
                        </div>

                        <div class="essay-part">
                            <h4>Body Paragraph 1 - Problems (5-7 sentences)</h4>
                            <textarea id="body1-text" oninput="updateWordCount('body1')" placeholder="Topic sentence + Problem 1 (DEEP) + Problem 2 (DEEP) + Link"></textarea>
                            <div class="word-count" id="body1-count">0 words</div>
                        </div>

                        <div class="essay-part">
                            <h4>Body Paragraph 2 - Solutions (5-7 sentences)</h4>
                            <textarea id="body2-text" oninput="updateWordCount('body2')" placeholder="Topic sentence + Solution 1 (What + How + Why effective) + Solution 2 (What + How + Why effective) + Link"></textarea>
                            <div class="word-count" id="body2-count">0 words</div>
                        </div>

                        <div class="essay-part">
                            <h4>Conclusion (2-3 sentences)</h4>
                            <textarea id="conclusion-text" oninput="updateWordCount('conclusion')" placeholder="Summarize problems + solutions + Final thought"></textarea>
                            <div class="word-count" id="conclusion-count">0 words</div>
                        </div>

                        <div class="info-box" style="background: white; border: 3px solid #667eea;">
                            <h3 style="color: #667eea;">üìä Essay Statistics</h3>
                            <div style="margin-top: 15px;">
                                <strong>Total Word Count:</strong> <span id="total-count" style="font-size: 1.5em; color: #667eea;">0</span> words
                                <div class="progress-bar">
                                    <div class="progress-fill" id="word-progress">0%</div>
                                </div>
                                <p style="margin-top: 10px; color: #666;"><em>Target: 270-290 words (minimum 250)</em></p>
                            </div>
                        </div>

                        <button class="check-button" onclick="analyzeEssay()">Analyze My Essay</button>
                        <div id="essay-feedback" class="feedback"></div>
                    </div>

                    <div class="success-box">
                        <h3>‚úÖ Self-Check Before Submitting</h3>
                        <ul>
                            <li>‚òê Have I identified at least 2 clear problems?</li>
                            <li>‚òê Have I explained WHY these are problems (impact)?</li>
                            <li>‚òê Have I proposed at least 2 realistic solutions?</li>
                            <li>‚òê Have I explained HOW and WHY solutions would work?</li>
                            <li>‚òê Are my body paragraphs roughly equal in length?</li>
                            <li>‚òê Have I used appropriate cause-effect language?</li>
                            <li>‚òê Did I paraphrase the question in my introduction?</li>
                            <li>‚òê Is my word count between 250-290?</li>
                        </ul>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        // Tab Switching
        function showTab(tabName) {
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));
            
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Drag and Drop Functionality
        let draggedElement = null;

        function setupDragDrop() {
            const draggables = document.querySelectorAll('.draggable');
            const dropZones = document.querySelectorAll('.drop-zone');

            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', function() {
                    draggedElement = this;
                    this.classList.add('dragging');
                });

                draggable.addEventListener('dragend', function() {
                    this.classList.remove('dragging');
                });
            });

            dropZones.forEach(zone => {
                zone.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.classList.add('drag-over');
                });

                zone.addEventListener('dragleave', function() {
                    this.classList.remove('drag-over');
                });

                zone.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.classList.remove('drag-over');
                    if (draggedElement) {
                        this.appendChild(draggedElement);
                    }
                });
            });
        }

        // Check Question Types
        function checkQuestionTypes() {
            const dropZones = document.querySelectorAll('#identifying .drop-zone');
            let correct = 0;
            let total = 0;

            dropZones.forEach(zone => {
                const items = zone.querySelectorAll('.draggable');
                items.forEach(item => {
                    total++;
                    if (item.dataset.type === zone.dataset.type) {
                        correct++;
                    }
                });
            });

            const feedback = document.getElementById('question-feedback');
            if (correct === total && total === 5) {
                feedback.className = 'feedback correct';
                feedback.textContent = '‚úÖ Perfect! You can now identify problem-solution questions accurately. Remember: look for keywords like "causes," "problems," "solutions," and "measures."';
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = `‚ùå ${correct} out of ${total} correct. Review the question types and try again. Look for specific keywords that indicate what the question is asking.`;
            }
        }

        function resetQuestions() {
            const items = document.querySelectorAll('#identifying .draggable');
            const container = document.getElementById('question-items');
            items.forEach(item => container.appendChild(item));
            document.getElementById('question-feedback').style.display = 'none';
        }

        // Check Cause Order (DEEP method)
        function checkCauseOrder() {
            const dropZones = document.querySelectorAll('#causes .drop-zone');
            let correct = true;

            dropZones.forEach(zone => {
                const item = zone.querySelector('.draggable');
                if (!item || item.dataset.order !== zone.dataset.order) {
                    correct = false;
                }
            });

            const feedback = document.getElementById('cause-feedback');
            if (correct) {
                feedback.className = 'feedback correct';
                feedback.textContent = '‚úÖ Excellent! You understand the DEEP method: Describe ‚Üí Explain ‚Üí Evidence ‚Üí Point to impact. Use this structure to develop all your causes!';
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '‚ùå Not quite. Remember DEEP: 1) Describe the cause, 2) Explain WHY it\'s a cause, 3) Evidence/example, 4) Point to the impact/effect.';
            }
        }

        function resetCauses() {
            const items = document.querySelectorAll('#causes .draggable');
            const container = document.getElementById('cause-items');
            items.forEach(item => container.appendChild(item));
            document.getElementById('cause-feedback').style.display = 'none';
        }

        // Check Language Exercise
        function checkLanguage() {
            const lang1 = document.getElementById('lang1').value;
            const lang2 = document.getElementById('lang2').value;
            const lang3 = document.getElementById('lang3').value;
            const lang4 = document.getElementById('lang4').value;

            const feedback = document.getElementById('language-feedback');

            if (lang1 === 'correct' && lang2 === 'correct' && lang3 === 'correct' && lang4 === 'correct') {
                feedback.className = 'feedback correct';
                feedback.textContent = '‚úÖ Perfect! You have a strong grasp of cause-effect and solution language structures. Use these patterns in your essays!';
            } else {
                feedback.className = 'feedback incorrect';
                let message = '‚ùå Not all correct. Tips: ';
                if (lang1 !== 'correct') message += '1) "stems from" shows origin/cause. ';
                if (lang2 !== 'correct') message += '2) Use "to + infinitive" after "would be". ';
                if (lang3 !== 'correct') message += '3) "leads to" shows direct cause-effect. ';
                if (lang4 !== 'correct') message += '4) "Were + subject + to" is formal conditional structure. ';
                feedback.textContent = message;
            }
        }

        // Analyze Solutions
        function analyzeSolutions() {
            const improve1 = document.getElementById('improve1').value;
            const improve2 = document.getElementById('improve2').value;
            const feedback = document.getElementById('solution-feedback');

            if (improve1.length < 20 || improve2.length < 20) {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '‚ùå Please write your improved solutions in the text boxes above!';
                return;
            }

            let score = 0;
            let tips = [];

            // Check for specificity
            if (improve1.length > 50 && improve2.length > 50) {
                score += 2;
            } else {
                tips.push('Make your solutions more detailed and specific');
            }

            // Check for responsible party
            const hasResponsibleParty = (improve1.toLowerCase().includes('government') || improve1.toLowerCase().includes('employer') || improve1.toLowerCase().includes('company') || improve1.toLowerCase().includes('school')) &&
                                       (improve2.toLowerCase().includes('government') || improve2.toLowerCase().includes('employer') || improve2.toLowerCase().includes('company') || improve2.toLowerCase().includes('school'));
            if (hasResponsibleParty) {
                score += 2;
            } else {
                tips.push('Identify WHO should implement the solution (governments/companies/individuals)');
            }

            // Check for explanation words
            const hasExplanation = (improve1.includes('would') || improve1.includes('could') || improve1.includes('by')) &&
                                  (improve2.includes('would') || improve2.includes('could') || improve2.includes('by'));
            if (hasExplanation) {
                score += 1;
            } else {
                tips.push('Explain HOW and WHY the solution would be effective');
            }

            if (score >= 4) {
                feedback.className = 'feedback correct';
                feedback.textContent = '‚úÖ Great improvement! Your solutions are much more specific and actionable. Keep using the SMART framework!';
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '‚ö†Ô∏è Good start, but needs more work. ' + tips.join('. ') + '.';
            }
        }

        // Word Count Functions
        function updateWordCount(section) {
            const textarea = document.getElementById(`${section}-text`);
            const countDisplay = document.getElementById(`${section}-count`);
            const words = textarea.value.trim().split(/\s+/).filter(word => word.length > 0);
            countDisplay.textContent = `${words.length} words`;
            
            updateTotalWordCount();
        }

        function updateTotalWordCount() {
            const sections = ['intro', 'body1', 'body2', 'conclusion'];
            let total = 0;
            
            sections.forEach(section => {
                const textarea = document.getElementById(`${section}-text`);
                if (textarea && textarea.value.trim()) {
                    const words = textarea.value.trim().split(/\s+/).filter(word => word.length > 0);
                    total += words.length;
                }
            });
            
            document.getElementById('total-count').textContent = total;
            
            const progress = Math.min((total / 290) * 100, 100);
            const progressBar = document.getElementById('word-progress');
            progressBar.style.width = `${progress}%`;
            progressBar.textContent = `${Math.round(progress)}%`;
        }

        // Analyze Essay
        function analyzeEssay() {
            const total = parseInt(document.getElementById('total-count').textContent);
            const feedback = document.getElementById('essay-feedback');
            
            if (total === 0) {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '‚ùå Please write your essay first!';
                return;
            }
            
            let analysis = 'üìä Essay Analysis:\n\n';
            
            // Word count analysis
            if (total < 250) {
                feedback.className = 'feedback incorrect';
                analysis += `‚ùå Word Count: ${total} words - UNDER MINIMUM (need at least 250)\n`;
            } else if (total < 270) {
                analysis += `‚ö†Ô∏è Word Count: ${total} words - Above minimum but aim for 270-290\n`;
            } else if (total <= 290) {
                feedback.className = 'feedback correct';
                analysis += `‚úÖ Word Count: ${total} words - EXCELLENT! Right in the target range\n`;
            } else {
                analysis += `‚ö†Ô∏è Word Count: ${total} words - A bit long, aim for 270-290\n`;
            }
            
            // Section analysis
            const intro = document.getElementById('intro-text').value.trim().split(/\s+/).filter(w => w.length > 0).length;
            const body1 = document.getElementById('body1-text').value.trim().split(/\s+/).filter(w => w.length > 0).length;
            const body2 = document.getElementById('body2-text').value.trim().split(/\s+/).filter(w => w.length > 0).length;
            const conclusion = document.getElementById('conclusion-text').value.trim().split(/\s+/).filter(w => w.length > 0).length;
            
            analysis += '\nüìù Section Analysis:\n';
            analysis += intro > 0 ? `‚úÖ Introduction: ${intro} words\n` : '‚ùå Missing Introduction\n';
            analysis += body1 > 0 ? `‚úÖ Body 1 (Problems): ${body1} words\n` : '‚ùå Missing Body Paragraph 1\n';
            analysis += body2 > 0 ? `‚úÖ Body 2 (Solutions): ${body2} words\n` : '‚ùå Missing Body Paragraph 2\n';
            analysis += conclusion > 0 ? `‚úÖ Conclusion: ${conclusion} words\n` : '‚ùå Missing Conclusion\n';
            
            // Balance check
            analysis += '\n‚öñÔ∏è Balance Check:\n';
            const diff = Math.abs(body1 - body2);
            if (diff <= 20) {
                analysis += '‚úÖ Body paragraphs are well-balanced\n';
            } else {
                analysis += `‚ö†Ô∏è Body paragraphs should be more balanced (difference: ${diff} words)\n`;
            }
            
            analysis += '\nüí° Next Steps:\n';
            analysis += '‚Ä¢ Check that you explained causes using DEEP method\n';
            analysis += '‚Ä¢ Verify your solutions are SMART (specific, realistic, targeted)\n';
            analysis += '‚Ä¢ Ensure you used appropriate cause-effect language\n';
            analysis += '‚Ä¢ Review for grammar and vocabulary errors\n';
            analysis += '‚Ä¢ Ask your teacher for detailed feedback!';
            
            feedback.textContent = analysis;
            feedback.style.whiteSpace = 'pre-line';
            if (!feedback.className.includes('correct')) {
                feedback.className = 'feedback incorrect';
            }
        }

        // Model Essay Click to Reveal
        function revealLabel(element, labelText) {
            element.classList.toggle('revealed');
            element.querySelector('.label').textContent = labelText;
        }

        // Update word counts for solution improvement
        document.getElementById('improve1')?.addEventListener('input', function() {
            const words = this.value.trim().split(/\s+/).filter(word => word.length > 0);
            document.getElementById('improve1-count').textContent = `${words.length} words`;
        });

        document.getElementById('improve2')?.addEventListener('input', function() {
            const words = this.value.trim().split(/\s+/).filter(word => word.length > 0);
            document.getElementById('improve2-count').textContent = `${words.length} words`;
        });

        // Initialize
        window.onload = function() {
            setupDragDrop();
        };
    </script>
</body>
</html>